(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{496:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"注册阿里云容器镜像服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注册阿里云容器镜像服务"}},[s._v("#")]),s._v(" 注册阿里云容器镜像服务")]),s._v(" "),t("p",[s._v("远程仓库有很多，这里选用阿里云容器镜像服务，"),t("a",{attrs:{href:"https://cr.console.aliyun.com/cn-shenzhen/repositories",target:"_blank",rel:"noopener noreferrer"}},[s._v("登录填写密码就注册好了"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"登录-docker-仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录-docker-仓库"}},[s._v("#")]),s._v(" 登录 Docker 仓库")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ docker login registry.cn-hangzhou.aliyuncs.com\nUsername: vczyh\nPassword: \nWARNING"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Your password will be stored unencrypted "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /home/vczyh/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#credentials-store")]),s._v("\n\nLogin Succeeded\n\n")])])]),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("Username")]),s._v(" "),t("td",[s._v("阿里云账号")])]),s._v(" "),t("tr",[t("td",[s._v("Password")]),s._v(" "),t("td",[s._v("第一步注册的密码，不是阿里云登录密码")])])])]),s._v(" "),t("p",[s._v("可以查看"),t("code",[s._v("~/.docker/config.json")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auths"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        \t// 每登录一个仓库，就会添加一条记录\n        \t\t// 官方默认仓库 如果没有登录过官方仓库就没有这条记录\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://index.docker.io/v1/"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auth"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxxxxx"')]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                // 阿里云杭州仓库\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry.cn-hangzhou.aliyuncs.com"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auth"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxxxxx"')]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HttpHeaders"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"User-Agent"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Docker-Client/18.09.3 (linux)"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),t("h3",{attrs:{id:"创建命名空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建命名空间"}},[s._v("#")]),s._v(" 创建命名空间")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190304000155465.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RLREtfYm90,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),t("h3",{attrs:{id:"push镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#push镜像"}},[s._v("#")]),s._v(" Push镜像")]),s._v(" "),t("p",[s._v("push之前需要给镜像打标签，让镜像的格式符合push格式："),t("code",[s._v("registry.cn-hangzhou.aliyuncs.com/acs/agent:0.8")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("registry.cn-hangzhou.aliyuncs.com")]),s._v(" "),t("td",[s._v("Registry的域名")])]),s._v(" "),t("tr",[t("td",[s._v("acs")]),s._v(" "),t("td",[s._v("使用的命名空间名称")])]),s._v(" "),t("tr",[t("td",[s._v("agent")]),s._v(" "),t("td",[s._v("使用的仓库名称")])]),s._v(" "),t("tr",[t("td",[s._v("0.8")]),s._v(" "),t("td",[s._v("镜像标签（Tag）。非必须，默认为latest")])])])]),s._v(" "),t("p",[s._v("将这几个完全独立的概念组合一下，"),t("code",[s._v("registry.cn-hangzhou.aliyuncs.com/acs/agent")]),s._v(" 称为仓库坐标，"),t("code",[s._v("acs/agent")]),s._v(" 称为仓库全名（通常在API中使用）。")]),s._v(" "),t("p",[s._v("格式：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker tag 镜像名或镜像ID Registry的域名/命名空间/仓库名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":TAG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[s._v("比如：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker tag friendlyhello:latest registry.cn-hangzhou.aliyuncs.com/zhangyuheng/hello:1.0\n")])])]),t("p",[t("code",[s._v("friendlyhello")]),s._v("是本地镜像的名字，我想把它推送到阿里云杭州Registry的命名空间为"),t("code",[s._v("zhangyuehng")]),s._v("的仓库，并且把远程仓库名设置为"),t("code",[s._v("hello")]),s._v("，远程仓库的"),t("code",[s._v("TAG")]),s._v("为1.0")]),s._v(" "),t("p",[t("strong",[s._v("push：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ docker push registry.cn-hangzhou.aliyuncs.com/zhangyuheng/hello\n\nThe push refers to repository "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("registry.cn-hangzhou.aliyuncs.com/zhangyuheng/hello"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n6a16fc072b92: Pushed \n25207160ad9f: Pushed \nea960483fa9a: Pushed \n4c17a5d758f3: Pushed \n7e6d2caa6460: Pushed \nba1d5b7b438f: Pushed \n0a07e81f5da3: Pushed \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(": digest: sha256:0ce58a5951363980bf04af8ebbe43c3aeb5c7509b0cfc852cf05f6ee3f81c179 size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1787")]),s._v("\n")])])]),t("p",[t("strong",[s._v("为什么要在push之前先生成另一个镜像，原因就是在push的时候可以让Docker通过镜像名分辨出要推送到哪里")])]),s._v(" "),t("h3",{attrs:{id:"查看远程仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看远程仓库"}},[s._v("#")]),s._v(" 查看远程仓库")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190304001922648.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RLREtfYm90,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),t("h3",{attrs:{id:"pull镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pull镜像"}},[s._v("#")]),s._v(" Pull镜像")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker pull registry.cn-hangzhou.aliyuncs.com/zhangyuheng/hello:1.0\n")])])]),t("h3",{attrs:{id:"运行远程仓库镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行远程仓库镜像"}},[s._v("#")]),s._v(" 运行远程仓库镜像")]),s._v(" "),t("p",[s._v("先删除本地镜像，不然会直接运行本地镜像")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker rmi registry.cn-hangzhou.aliyuncs.com/zhangyuheng/hello:1.0 \n")])])]),t("p",[s._v("下载镜像并运行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ docker run -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4000")]),s._v(":80 registry.cn-hangzhou.aliyuncs.com/zhangyuheng/hello:1.0\n\nUnable to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" image "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'registry.cn-hangzhou.aliyuncs.com/zhangyuheng/hello:1.0'")]),s._v(" locally\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(": Pulling from zhangyuheng/hello\nDigest: sha256:0ce58a5951363980bf04af8ebbe43c3aeb5c7509b0cfc852cf05f6ee3f81c179\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" registry.cn-hangzhou.aliyuncs.com/zhangyuheng/hello:1.0\n * Serving Flask app "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lazy loading"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n * Environment: production\n   WARNING: Do not use the development server "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a production environment.\n   Use a production WSGI server instead.\n * Debug mode: off\n * Running on http://0.0.0.0:80/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press CTRL+C to quit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);